---
title: "리팩터링 03 코드에서 나는 악취"
date: 2020-06-27 23:59:00
categories: review
tags:
  - 리팩터링
  - 개발자
  - 책리뷰
---
## 기이한 이름

코든 단순하고 명료하게 작성해야한다. 함수, 모듈, 변수, 클래스 등은 이름만 보고도 각각이 무슨일을 하고 어떻게 사용해야하는 지 명확히 알 수 있도록 엄청나게 신경써서 이름을 지어야 한다.

- 함수 선언 바꾸기
- 변수 이름 바꾸기
- 필드 이름 바꾸기

## 중복 코드

똑같은 코드 구조가 여러곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다.

- 함수 추출하기
- 문장 슬라이스하기
- 메서드 올리기

## 긴 함수

코드를 이해하고 공유하고 선택하기 쉬워지는 장점은 함수를 짧게 구성할 때 나온다.

- 함수 추출하기
- 임시 변수를 질의함수로 바꾸기
- 매개변수 객체 만들기
- 객체 통째로 넘기기
- 함수를 명령으로 바꾸기
- 조건문 분해하기
- 조건문을 다형성으로 바꾸기
- 반복문 쪼개기

## 긴 매개변수 목록

매개변수 목록이 길어지면 그 자체로 이해하기 어렵다.

- 매개변수를 질의 함수로 바꾸기
- 객체 통째로 넘기기
- 매개변수 객체만들기
- 플래그 인수 제거하기
- 여러 함수를 클래스로 묶기

## 전역 데이터

전역 데이터는 코드 어디에서든 건드릴 수 있고 누가 바꿨는지 찾아낼 수 없어 문제로 버그가 발생할 수 있다.

- 변수 캡슐화하기

## 가변 데이터

데이터를 변경했더니 예상치 못한 결과나 골치 아픈 버그로 이어지는 경우가 종종 있다. 코드의 다른 곳에서 는 다른 값을 기대한다는 사실을 인식하지 못한채 코드를 수정해버리면 프로그램이 오작동한다.

- 변수 캡슐화하기
- 변수 쪼개기
- 문장 슬라이스 하기
- 함수 추출하기
- 질의 함수와 변경 함수 분리하기
- 세터 제거하기
- 파생변수를 질의 함수로 바꾸기
- 여러함수를 클래스로 묶기
- 여러 함수를 변환함수로 묶기
- 참조를 값으로 바꾸기

## 뒤엉킨 변경

뒤엉킨 변경은 단일 책임 원칙(SRP)이 제대로 지켜지지 않을 때 나타난다. 하나의 모듈이 서로 다른 이유들로 인해 여러가지 방식으로 변경되는 일이 많을 때 발생

- 단계 쪼개기
- 함수 옮기기
- 함수 추출하기
- 클래스 추출하기

## 산탄총 수술

코드를 변경할 때마다 자잘하게 수정해야 하는 클래스가 많은 경우

- 함수 옮기기
- 필드 옮기기
- 여러 함수를 클래스로 묶기
- 여러 함수를 변환 함수로 묶기
- 단계 쪼개기
- 함수 인라인하기
- 클래스 인라인하기

## 기능 편애

어떤 함수가 자기가 속한 모듈의 함수나 데이터보다 다른 모듈의 함수나 데이터와 상호작용할 일이 많을 때 풍기는 냄새

- 함수 옮기기
- 함수 추출하기

## 데이터 뭉치

- 클래스 추출하기
- 매개변수 객체 만들기
- 객체 통째로 넘기기

## 기본형 집착

- 기본형을 객체로 바꾸기
- 타입 모드를 서브클래스로 바꾸기
- 조건부 로직을 다형성으로 바꾸기
- 클래스 추출하기
- 매개변수 객체 만들기

## 반복되는 switch문

- 조건부 로직을 다형으로 바꾸기

## 반복문

- 반복문을 파이프라인으로 바꾸기

## 성의 없는 요소

본문코드를 그대로 쓰는 것과 진배 없는 함수, 실질적으로 메서드가 하나 뿐인 클래스

- 함수 인라인하기
- 클래스 인라인하기
- 계층 합치기

## 추측성 일반화

당장은 필요없는 모든 종류의 후킹, 특이케이스, 매래를 대비해 작성한 부분

- 계층 합치기
- 함수 인라인하기
- 클래스 인라인하기
- 함수 선언 바꾸기

## 임시 필드

특정상황에서만 값이 설정되는 필드를 가진 클래스

- 클래스 추출하기
- 함수 옮기기
- 특이 케이스 추가

## 메세지 체인

- 위임 숨기기
- 함수 추출하기

## 중개자

클래스가 제공하는 메서드 중 절반이 다른 클래스에 구현을 위임하는 경우

- 중개자 제거하기
- 함수 인라인하기

## 내부자 거래

- 함수 옮기기
- 필드 옮기기
- 위임 숨기기
- 서브클래스를 위임으로 바꾸기
- 슈퍼클래스를 위임으로 바꾸기

## 거대한 클래스

한 클래스에서 너무 많은 일을 하려다 보면 필드 수가 상당히 늘어난다. 중복 코드가 생기기 쉽다. 

- 클래스 추출하기
- 슈퍼클래스 추출하기
- 타입코드를 서브클래스로 바꾸기

## 서로 다른 인터페이스의 대안 클래스들

- 함수 선언 바꾸기
- 함수 옮기기

## 데이터 클래스

- 레코드 캡슐화하기
- 세터 제거하기
- 

## 상속 포기

부모의 유산을 원치 않거나 필요 없는 경우 

- 메서드 내리기
- 필드 내리기

## 주석

주석을 남겨야 겠다는 생각이 들면, 가장 먼저 주석이 필요 없는 코드로 리팩터링 해본다.