---
title: "6장: 객체와 자료구조"
date: 2019-08-24 01:01:11
categories: cleancode
tag: 클린코드 개발
---

## 자료 추상화
추상 인터페이스를 제공해 사용자가 구현을 모른 채 자료의 핵심을 조작할 수 있어야 한다.

## 자료/객체 비대칭
절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽지만 새로운 자료 구조를 추가하기 어렵다. 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽지만 모든 클래스를 고쳐야 하기 때문에 새로운 함수를 추가하기 여렵다. 때로는 단순한 자료 구조와 절차적인 코드가 가장 적합한 상황이 있다.

## 디미터 법칙
모든 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다. 객체는 자료를 숨기고 함수를 공개한다.
클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야 한다.
* 클래스C
* f가 생성한 객체
* f인수로 넘어온 객체
* C 인스턴스 변수로 저장된 객체

### 기차 충돌
```
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();

위 코드 보다 다음이 좋다.

Options opts = ctxt.getOptions();
File scratchDir = opts.getScratchDir();
final String outputDir = scratchDir.getAbsolutePath();
```
자료 구조는 무조건 함수 없이 공개 변수만 포함하고 객체는 비공개 변수와 공개 함수를 포함한다.

## 자료 전달 객체(Data Transfer Object, DTO)
자료 구조체의 전형적인 형태는 공개 변수만 있고 함수가 없는 클래스이다. 데이터베이스와 통신하거나 소켓에서 받은 메시지의 구문을 분석할 때 유용하다. 

### 활성 레코드
활성 레코드에 비즈니스 규칙 메서드를 추가해 자료구조를 객체로 취급하지 않는다. 비즈니스 규칙을 담으면서 내부 자료를 숨기는 객체는 따로 생성한다.


시스템을 구현할 때, 새로운 자료 타입을 추가하는 유연성이 필요하면 객체가 더 적합하다. 새로운 동작을 추가하는 유연성이 필요하면 자료 구조와 절차적인 코드가 더 적합하다.
