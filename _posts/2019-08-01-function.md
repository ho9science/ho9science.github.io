---
title: "3장: 함수"
date: 2019-08-01 01:01:11
categories: cleancode
tag: 클린코드 개발
---

의도를 표현하는 함수를 어떻게 구현할 수 있을까?

## 작게 만들어라
함수를 만드는 첫번째 규칙은 작게 만들어라.

### 블록과 들여쓰기
if문 else문 while문 등에 들어가는 블록은 한 줄이어야 한다. 중첩 구조가 생길만큼 함수가 커져서는 안된다. 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서면 안 된다.

## 한가지만 해라
함수는 한가지만 해야 한다. 추상화 수준이 하나인 단계만 수행한다.

## 함수당 추상화 수준은 하나로
코드는 위에서 아래로 이야기처럼 읽혀야 좋다. 위에서 아래로 읽으면 함수 추상화 수준이 한 단계씩 낮아진다.

## switch문
switch문을 완전히 피할 방법은 없지만 각 switch문을 다형성(polymorphism)을 이용하여 반복하지 않는 방법이 있다.

## 서술적인 이름을 사용하라
함수가 하는 일을 좀 더 잘 표현하면 좋다.

## 함수 인수
이상적인 인수 개수는 0개다. 인수는 개념을 이해하기 어렵게 만든다. 테스트 관점에서도 인수가 없다면 간단하지만 3개를 넘어가면 유효한 값으로 모든 조합을 구성해 테스트하기가 부담스럽다.

### 많이 쓰는 단항 형식
- 인수에 질문을 던지는 경우, `boolean fileExists("MyFile")`
- 인수를 뭔가로 변환해 결과를 반환하는 경우, `InputStream fileOpen("MyFile")` 은 String 형의 파일 이름을 InputStream으로 변환한다. 
`
void transform(StringBuffer out);
보다 
StringBuffer transform(StringBuffer in);
이 더 좋다.
`

### 플래그 인수
함수로 부울 값을 넘기는 관례는 끔찍하다. 

### 이항 함수
인수가 2개인 함수는 1개인 함수보다 이해하기 어렵다. assertEquals(expected, actual)에서도 순서를 틀리는 경우가 많다. 프로그램을 짜다보면 불가피한 경우가 많지만 그만큼 위험이 따른다는 사실을 이해하고 단항 함수로 바꾸도록 애써야한다. 

### 인수 객체
인수가 2-3개 필요하다면 일부를 독자적인 클래스 변수로 선언하는 것도 좋다.
`
Circle makeCircle(double x, double y, double radius);
Circle makeCircle(Point center, double radius);
`

### 동사와 키워드
함수의 의도나 인수의 순서와 의도를 제대로 표현하려면 좋은 함수 이름이 필요하다. 함수와 인수가 동사/명사 쌍을 이뤄야한다. 함수 이름에 키워드를 추가하는 형식도 괜찮다. 
`
assertExpectedEqualsActual(expected, actual)
`

## 부수 효과를 일으키지 마라 
예상치 못하게 클래스 변수를 수정하거나 함수로 넘어온 인수나 전역 변수를 수정하는 등의 행위를 하지 않는다. 특히 부수 효과로 숨겨진 경우에 부작용이 크다. 

### 출력 인수
출력 인수는 피해야 한다. 
함수에서 상태를 변경해야 한다면 함수가 속한 객체 상태를 변경하는 방식을 택한다.
`
public void appendFooter(StringBuffer report)
대신
report.appendFooter();
`

## 명령과 조회를 분리하라
함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다. 객체 상태를 변경하거나 아니면 객체 정보를 반환하거나 둘 중 하나다.

## 오류 코드보다 예외를 사용하라
오류 코드 대신 예외를 사용하면 코드가 깔끔해진다.

### try/catch 블록 뽑아내기
try/catch 블록은 별도 함수로 뽑아내는 편이 좋다.
### 오류 처리도 한 가지 작업이다.
try문으로 시작한다면 catch/finally문으로 끝나야 한다. 

## 반복하지 마라
중복은 소프트웨어에서 모든 악의 근원이다.
